---
title: 네임스페이스 API
description: 데이터 컨테이너 관리를 위한 네임스페이스 CRUD 작업
---

# 네임스페이스 API

네임스페이스는 테이블과 뷰의 컨테이너로, 기존 시스템의 데이터베이스나 스키마와 유사합니다.

## 네임스페이스 목록 조회

모든 네임스페이스를 조회하며, 선택적으로 상위 네임스페이스로 필터링할 수 있습니다.

### 요청

```http
GET /v1/namespaces
GET /v1/namespaces?parent={parent}
GET /v1/namespaces?pageToken={token}&pageSize={size}
```

### 쿼리 파라미터

| 파라미터 | 타입 | 필수 | 설명 |
|-----------|------|----------|-------------|
| `parent` | string | 아니오 | 하위 항목을 필터링할 상위 네임스페이스 |
| `pageToken` | string | 아니오 | 이전 응답의 페이지네이션 토큰 |
| `pageSize` | integer | 아니오 | 최대 결과 수 (기본값: 100) |

### 응답

```json
{
  "namespaces": [
    ["analytics"],
    ["analytics", "events"],
    ["raw"]
  ],
  "next-page-token": "eyJvZmZzZXQiOjEwMH0="
}
```

### 예시

```bash
# 모든 네임스페이스 조회
curl http://localhost:8181/v1/namespaces

# "analytics"의 하위 네임스페이스 조회
curl "http://localhost:8181/v1/namespaces?parent=analytics"
```

---

## 네임스페이스 생성

새 네임스페이스를 생성합니다.

### 요청

```http
POST /v1/namespaces
```

### 요청 본문

```json
{
  "namespace": ["analytics", "events"],
  "properties": {
    "owner": "data-team",
    "description": "이벤트 분석 데이터"
  }
}
```

### 요청 필드

| 필드 | 타입 | 필수 | 설명 |
|-------|------|----------|-------------|
| `namespace` | array[string] | 예 | 이름 부분의 배열로 된 네임스페이스 식별자 |
| `properties` | object | 아니오 | 네임스페이스의 키-값 속성 |

### 응답

```json
{
  "namespace": ["analytics", "events"],
  "properties": {
    "owner": "data-team",
    "description": "이벤트 분석 데이터"
  }
}
```

### 오류

| 코드 | 오류 | 설명 |
|------|-------|-------------|
| 400 | `BadRequestException` | 잘못된 네임스페이스 형식 |
| 409 | `AlreadyExistsException` | 네임스페이스가 이미 존재함 |

### 예시

```bash
curl -X POST http://localhost:8181/v1/namespaces \
  -H "Content-Type: application/json" \
  -d '{
    "namespace": ["analytics"],
    "properties": {
      "owner": "platform-team"
    }
  }'
```

---

## 네임스페이스 조회

속성을 포함한 네임스페이스 메타데이터를 로드합니다.

### 요청

```http
GET /v1/namespaces/{namespace}
```

### 경로 파라미터

| 파라미터 | 타입 | 설명 |
|-----------|------|-------------|
| `namespace` | string | URL 인코딩된 네임스페이스 |

### 응답

```json
{
  "namespace": ["analytics", "events"],
  "properties": {
    "owner": "data-team",
    "description": "이벤트 분석 데이터",
    "created_at": "2024-01-15T10:30:00Z"
  }
}
```

### 오류

| 코드 | 오류 | 설명 |
|------|-------|-------------|
| 404 | `NoSuchNamespaceException` | 네임스페이스가 존재하지 않음 |

### 예시

```bash
# 단순 네임스페이스
curl http://localhost:8181/v1/namespaces/analytics

# 중첩 네임스페이스 (구분자를 URL 인코딩)
curl http://localhost:8181/v1/namespaces/analytics%1Fevents
```

---

## 네임스페이스 존재 확인

메타데이터를 로드하지 않고 네임스페이스가 존재하는지 확인합니다.

### 요청

```http
HEAD /v1/namespaces/{namespace}
```

### 응답

- **200 OK**: 네임스페이스 존재
- **404 Not Found**: 네임스페이스가 존재하지 않음

### 예시

```bash
curl -I http://localhost:8181/v1/namespaces/analytics
```

---

## 네임스페이스 속성 업데이트

네임스페이스의 속성을 업데이트하거나 제거합니다.

### 요청

```http
POST /v1/namespaces/{namespace}/properties
```

### 요청 본문

```json
{
  "updates": {
    "owner": "new-team",
    "retention": "90d"
  },
  "removals": ["description", "deprecated_key"]
}
```

### 요청 필드

| 필드 | 타입 | 필수 | 설명 |
|-------|------|----------|-------------|
| `updates` | object | 아니오 | 추가하거나 업데이트할 속성 |
| `removals` | array[string] | 아니오 | 제거할 속성 키 |

### 응답

```json
{
  "updated": ["owner", "retention"],
  "removed": ["description"],
  "missing": ["deprecated_key"]
}
```

### 예시

```bash
curl -X POST http://localhost:8181/v1/namespaces/analytics/properties \
  -H "Content-Type: application/json" \
  -d '{
    "updates": {"owner": "platform-team"},
    "removals": ["old_property"]
  }'
```

---

## 네임스페이스 삭제

빈 네임스페이스를 삭제합니다.

### 요청

```http
DELETE /v1/namespaces/{namespace}
```

### 응답

- **204 No Content**: 네임스페이스가 성공적으로 삭제됨

### 오류

| 코드 | 오류 | 설명 |
|------|-------|-------------|
| 404 | `NoSuchNamespaceException` | 네임스페이스가 존재하지 않음 |
| 409 | `NamespaceNotEmptyException` | 네임스페이스에 테이블 또는 뷰가 포함됨 |

### 예시

```bash
curl -X DELETE http://localhost:8181/v1/namespaces/analytics
```

<Callout type="warn">
네임스페이스를 삭제하기 전에 먼저 모든 테이블과 뷰를 삭제해야 합니다.
</Callout>
