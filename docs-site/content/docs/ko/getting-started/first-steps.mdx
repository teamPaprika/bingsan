---
title: 첫 번째 단계
description: Bingsan에서 첫 번째 네임스페이스와 테이블 생성하기
---

# 첫 번째 단계

Bingsan을 설치한 후 이 가이드를 따라 첫 번째 네임스페이스와 테이블을 생성해보세요.

## 계층 구조 이해하기

Iceberg 카탈로그는 계층 구조를 사용합니다:

```
Catalog (Bingsan)
└── Namespace (예: "analytics", "raw.events")
    └── Table (예: "user_events")
        └── Metadata (스키마, 파티션, 스냅샷)
```

## 네임스페이스 생성

네임스페이스는 테이블의 컨테이너입니다. 점(.) 또는 배열을 사용하여 중첩할 수 있습니다.

```bash
# 간단한 네임스페이스 생성
curl -X POST http://localhost:8181/v1/namespaces \
  -H "Content-Type: application/json" \
  -d '{
    "namespace": ["analytics"],
    "properties": {
      "owner": "data-team",
      "description": "Analytics data warehouse"
    }
  }'
```

응답:
```json
{
  "namespace": ["analytics"],
  "properties": {
    "owner": "data-team",
    "description": "Analytics data warehouse"
  }
}
```

### 중첩 네임스페이스

중첩 네임스페이스 생성:

```bash
curl -X POST http://localhost:8181/v1/namespaces \
  -H "Content-Type: application/json" \
  -d '{
    "namespace": ["analytics", "events"],
    "properties": {}
  }'
```

### URL에서 중첩 네임스페이스 참조하기

REST API URL (GET, DELETE, HEAD)에서 중첩 네임스페이스를 참조할 때 다음 형식 중 하나를 사용합니다:

**옵션 1: 점으로 구분 (간단)**
```bash
# 중첩 네임스페이스 조회
curl http://localhost:8181/v1/namespaces/analytics.events

# 중첩 네임스페이스 삭제
curl -X DELETE http://localhost:8181/v1/namespaces/analytics.events
```

**옵션 2: URL 인코딩된 유닛 구분자 (`%1F`)**
```bash
# 네임스페이스 이름에 점이 포함된 경우 %1F 구분자 사용
curl http://localhost:8181/v1/namespaces/analytics%1Fevents
```

> **참고**: 네임스페이스 부분에 점이 포함된 경우 `%1F` (유닛 구분자)를 사용하세요. 예: `["my.app", "events"]`는 `my.app%1Fevents`로 인코딩합니다.

## 네임스페이스 목록 조회

```bash
# 모든 네임스페이스 조회
curl http://localhost:8181/v1/namespaces
```

응답:
```json
{
  "namespaces": [
    ["analytics"],
    ["analytics", "events"]
  ]
}
```

### 상위 네임스페이스로 필터링

```bash
# 하위 네임스페이스 조회
curl "http://localhost:8181/v1/namespaces?parent=analytics"
```

## 네임스페이스 상세 조회

```bash
curl http://localhost:8181/v1/namespaces/analytics
```

응답:
```json
{
  "namespace": ["analytics"],
  "properties": {
    "owner": "data-team",
    "description": "Analytics data warehouse"
  }
}
```

## 테이블 생성

테이블은 Iceberg 사양을 따르는 스키마 정의가 필요합니다.

```bash
curl -X POST http://localhost:8181/v1/namespaces/analytics/tables \
  -H "Content-Type: application/json" \
  -d '{
    "name": "user_events",
    "schema": {
      "type": "struct",
      "schema-id": 0,
      "fields": [
        {"id": 1, "name": "event_id", "required": true, "type": "string"},
        {"id": 2, "name": "user_id", "required": true, "type": "long"},
        {"id": 3, "name": "event_type", "required": true, "type": "string"},
        {"id": 4, "name": "event_time", "required": true, "type": "timestamptz"},
        {"id": 5, "name": "properties", "required": false, "type": {"type": "map", "key-id": 6, "key": "string", "value-id": 7, "value": "string"}}
      ]
    },
    "partition-spec": {
      "spec-id": 0,
      "fields": [
        {"source-id": 4, "field-id": 1000, "name": "event_day", "transform": "day"}
      ]
    },
    "properties": {
      "format-version": "2",
      "write.parquet.compression-codec": "zstd"
    }
  }'
```

## 테이블 목록 조회

```bash
curl http://localhost:8181/v1/namespaces/analytics/tables
```

응답:
```json
{
  "identifiers": [
    {"namespace": ["analytics"], "name": "user_events"}
  ]
}
```

## 테이블 메타데이터 로드

```bash
curl http://localhost:8181/v1/namespaces/analytics/tables/user_events
```

이 API는 다음을 포함한 전체 테이블 메타데이터를 반환합니다:
- 현재 스키마
- 파티션 사양
- 정렬 순서
- 현재 스냅샷
- 테이블 속성

## 테이블 존재 확인

가벼운 존재 확인을 위해 HEAD 요청을 사용합니다:

```bash
curl -I http://localhost:8181/v1/namespaces/analytics/tables/user_events
```

존재하면 HTTP 200, 존재하지 않으면 404를 반환합니다.

## 네임스페이스 속성 업데이트

```bash
curl -X POST http://localhost:8181/v1/namespaces/analytics/properties \
  -H "Content-Type: application/json" \
  -d '{
    "updates": {
      "owner": "platform-team"
    },
    "removals": ["description"]
  }'
```

## 리소스 삭제

### 테이블 삭제

```bash
curl -X DELETE http://localhost:8181/v1/namespaces/analytics/tables/user_events
```

### 네임스페이스 삭제

<Callout type="warn">
네임스페이스는 비어 있어야 삭제할 수 있습니다.
</Callout>

```bash
curl -X DELETE http://localhost:8181/v1/namespaces/analytics
```

## Spark와 함께 사용하기

카탈로그가 설정되면 Spark에서 연결합니다:

```python
from pyspark.sql import SparkSession

spark = SparkSession.builder \
    .appName("Bingsan Example") \
    .config("spark.sql.catalog.bingsan", "org.apache.iceberg.spark.SparkCatalog") \
    .config("spark.sql.catalog.bingsan.type", "rest") \
    .config("spark.sql.catalog.bingsan.uri", "http://localhost:8181") \
    .getOrCreate()

# 테이블 목록
spark.sql("SHOW TABLES IN bingsan.analytics").show()

# 테이블 쿼리
spark.sql("SELECT * FROM bingsan.analytics.user_events LIMIT 10").show()
```

## 다음 단계

- [모든 API 엔드포인트 살펴보기](/docs/api)
- [인증 설정](/docs/configuration/auth)
- [모니터링 설정](/docs/configuration/monitoring)
