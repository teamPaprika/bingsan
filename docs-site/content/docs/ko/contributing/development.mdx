---
title: 개발 환경
description: 개발 환경 설정
---

# 개발 환경

Bingsan을 위한 로컬 개발 환경을 설정합니다.

## 전제조건

- Go 1.23+
- Docker 및 Docker Compose
- Make
- PostgreSQL 클라이언트 (psql) - 선택사항

## 빠른 설정

```bash
# 클론 및 디렉토리 진입
git clone https://github.com/teamPaprika/bingsan.git
cd bingsan

# Go 의존성 설치
go mod download

# 개발 도구 설치
make install-tools

# 설정 복사
cp config.example.yaml config.yaml

# PostgreSQL 시작
make docker-up

# 핫 리로드와 함께 실행
make dev
```

## 빌드 명령어

```bash
# 바이너리 빌드
make build

# 핫 리로드 없이 실행
make run

# 빌드 아티팩트 정리
make clean
```

## 데이터베이스 관리

```bash
# 모든 마이그레이션 적용
make migrate-up

# 마이그레이션 하나 롤백
make migrate-down

# 새 마이그레이션 생성
make migrate-create name=add_feature_table
```

## 핫 리로드

프로젝트는 개발 중 핫 리로드를 위해 [air](https://github.com/cosmtrek/air)를 사용합니다:

```bash
make dev
```

Air는 파일 변경을 감시하고 자동으로 서버를 재빌드하고 재시작합니다.

## IDE 설정

### VS Code

권장 확장 프로그램:
- Go (golang.go)
- EditorConfig
- YAML

설정:
```json
{
  "go.lintTool": "golangci-lint",
  "go.lintFlags": ["--fast"],
  "editor.formatOnSave": true
}
```

### GoLand

- Go Modules 통합 활성화
- golangci-lint를 외부 도구로 구성
- gofumpt를 포매터로 설정

## 환경 변수

개발 시 환경 변수로 config.yaml을 오버라이드할 수 있습니다:

```bash
export ICEBERG_SERVER_PORT=8181
export ICEBERG_DATABASE_HOST=localhost
export ICEBERG_DEBUG=true
```

## 디버깅

### Delve 디버거

```bash
# delve 설치
go install github.com/go-delve/delve/cmd/dlv@latest

# 디버그
dlv debug ./cmd/iceberg-catalog
```

### VS Code 실행 구성

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Launch Bingsan",
      "type": "go",
      "request": "launch",
      "mode": "auto",
      "program": "${workspaceFolder}/cmd/iceberg-catalog",
      "args": ["-config", "config.yaml"]
    }
  ]
}
```
