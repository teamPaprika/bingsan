# Bingsan Benchmark Configuration
# This file overrides polaris-tools benchmark-defaults.conf

# HTTP connection settings
http {
  base-url = "http://localhost:8181"
}

# OAuth2 authentication for bingsan
auth {
  client-id = "benchmark-client"
  client-secret = "benchmark-secret"
  refresh-interval-seconds = 300
  max-retries = 5
  retryable-http-codes = [500, 502, 503, 504]
}

# Dataset configuration
dataset {
  # Bingsan uses local file storage by default
  storage-config-info = { storageType = "FILE" }
  default-base-location = "file:///tmp/iceberg/warehouse"

  # Catalog structure
  num-catalogs = 1

  # Namespace tree structure
  namespace-width = 2
  namespace-depth = 3

  # Tables and views per namespace
  tables-per-namespace = 5
  max-tables = -1
  views-per-namespace = 3
  max-views = -1

  # Schema complexity
  columns-per-table = 10
  columns-per-view = 10

  # Properties
  namespace-properties = 5
  table-properties = 5
  view-properties = 5
}

# Workload configurations
workload {
  # CreateCommits simulation
  create-commits {
    table-commits-throughput = 10
    view-commits-throughput = 5
    duration-in-minutes = 1
  }

  # ReadTreeDataset simulation
  read-tree-dataset {
    namespace-concurrency = 20
    table-concurrency = 20
    view-concurrency = 10
  }

  # CreateTreeDataset simulation
  create-tree-dataset {
    table-concurrency = 20
    view-concurrency = 10
  }

  # ReadUpdateTreeDataset simulation
  read-update-tree-dataset {
    read-write-ratio = 0.8
    throughput = 50
    duration-in-minutes = 3
  }

  # WeightedWorkloadOnTreeDataset simulation
  weighted-workload-on-tree-dataset {
    seed = 42
    readers = [
      { count = 8, mean = 0.3, variance = 0.0278 }
    ]
    writers = [
      { count = 2, mean = 0.7, variance = 0.0278 }
    ]
    duration-in-minutes = 3
  }
}
